const _0x2d1446=_0x319e;function _0x1d83(){const _0x2ac6b4=['innerHTML','90BLnbDC','28PmDUpK','</td>\x0a\x20\x20\x20\x20\x20\x20<td>','parentElement','querySelectorAll','3721207pfceMF','then','135000okqYNW','\x20disabled','catch','tbodyReservas','</td>\x0a\x20\x20\x20\x20</tr>','432682xLivBf','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td><button\x20type=\x22button\x22\x20class=\x22btn\x20btn-primary\x20btn-Anular\x22\x20data-bs-toggle=\x22modal\x22\x20data-bs-target=\x22#modalAnular\x22>Anular</button></td>\x0a\x20\x20\x20\x20\x20\x20</tr>','USUARIO','Delete\x20Exitoso','¿Seguro\x20que\x20deseas\x20cerrar\x20la\x20sesión?','126039QBCutD','TITULO','AUTOR','\x0a\x20\x20\x20\x20<tr\x20class=\x22align-middle\x22>\x0a\x20\x20\x20\x20\x20\x20<td>','substring','Error\x20al\x20eliminar\x20la\x20reserva','click','PENDIENTE','tipoUsuario','844460meNGRa','FECHA_FIN','La\x20reserva\x20ha\x20sido\x20eliminada\x20con\x20éxito','No\x20puedes\x20reservar:\x20Ya\x20tienes\x20una\x20reserva\x20o\x20préstamo\x20en\x20curso\x20con\x20éste\x20ejemplar','apellidosUsuario','MATERIA','addEventListener','tbodyPrestAct','nextElementSibling','CENTRO','232472AzAarg','COD_LIBRO','EDITORIAL','removeItem','nomApes','A_EDICION','camposAnular','.btn-Reservar','substr','href','Alumno','perfil.html','No\x20puedes\x20reservar:\x20Tienes\x20demasiadas\x20reservas\x20y/o\x20préstamos\x20en\x20curso','2914860WpvrAJ','ESTADO','btnLogout','dniUsuario','Error\x20al\x20procesar\x20la\x20petición\x20de\x20cálculo\x20de\x20fecha','nombreUsuario','</td>\x0a\x20\x20\x20\x20\x20\x20<td><button\x20type=\x22button\x22\x20class=\x22btn\x20btn-primary\x20btn-Reservar\x22','target','Error\x20al\x20procesar\x20la\x20petición\x20de\x20información\x20sobre\x20préstamos','¿Seguro\x20que\x20deseas\x20anular\x20la\x20reserva?\x20El\x20ejemplar\x20volverá\x20a\x20estar\x20disponible\x20al\x20público','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','getElementById','Error\x20al\x20procesar\x20la\x20petición\x20de\x20información\x20sobre\x20reservas','getItem','\x0a\x20\x20\x20\x20<tr\x20class=\x22align-middle\x22>\x0a\x20\x20\x20\x20\x20\x20<td\x20class=\x22d-none\x22>','</td>\x0a\x20\x20\x20\x20\x20\x20<td','</td>\x0a\x20\x20\x20\x20\x20\x20<td\x20class=\x22d-none\x22>','DEPARTAMENTO','reservas','Error\x20al\x20procesar\x20la\x20petición\x20de\x20borrado\x20de\x20la\x20reserva','length','1kIujdW','tbodyHistPrest','textContent','DISPONIBLE','>Reservar</button></td>\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20data-bs-toggle=\x22modal\x22\x20data-bs-target=\x22#modalReserva\x22>\x0a\x20\x20\x20\x20</tr>','prestamos','children','Error\x20al\x20recuperar\x20los\x20datos\x20de\x20ésta\x20reserva','login.html','Error\x20al\x20procesar\x20la\x20petición\x20de\x20inserción\x20de\x20la\x20reserva'];_0x1d83=function(){return _0x2ac6b4;};return _0x1d83();}(function(_0x185aa2,_0x30a02d){const _0x552477=_0x319e,_0x378791=_0x185aa2();while(!![]){try{const _0x8a292c=parseInt(_0x552477(0x186))/0x1*(parseInt(_0x552477(0x14c))/0x2)+-parseInt(_0x552477(0x151))/0x3*(-parseInt(_0x552477(0x192))/0x4)+-parseInt(_0x552477(0x15a))/0x5+-parseInt(_0x552477(0x198))/0x6+parseInt(_0x552477(0x196))/0x7+-parseInt(_0x552477(0x164))/0x8*(parseInt(_0x552477(0x191))/0x9)+-parseInt(_0x552477(0x171))/0xa;if(_0x8a292c===_0x30a02d)break;else _0x378791['push'](_0x378791['shift']());}catch(_0x5b4c1e){_0x378791['push'](_0x378791['shift']());}}}(_0x1d83,0x41915));function _0x319e(_0x2a077e,_0x1f752c){const _0x1d8308=_0x1d83();return _0x319e=function(_0x319e76,_0x2e2710){_0x319e76=_0x319e76-0x14a;let _0x3def8c=_0x1d8308[_0x319e76];return _0x3def8c;},_0x319e(_0x2a077e,_0x1f752c);}let nomApes=document[_0x2d1446(0x17c)](_0x2d1446(0x168)),tbodyReservas=document[_0x2d1446(0x17c)](_0x2d1446(0x14a)),tbodyPrestAct=document['getElementById'](_0x2d1446(0x161)),tbodyHistPrest=document[_0x2d1446(0x17c)](_0x2d1446(0x187)),btnLogout=document[_0x2d1446(0x17c)](_0x2d1446(0x173)),btnAnular=document[_0x2d1446(0x17c)]('btnAnular'),btnReservar=document[_0x2d1446(0x17c)]('btnReservar'),camposAnular=document[_0x2d1446(0x17c)](_0x2d1446(0x16a)),camposReserva=document['getElementById']('camposReserva');eliminarSesionAdmin();if(!sessionStorage[_0x2d1446(0x17e)](_0x2d1446(0x159)))location[_0x2d1446(0x16d)]=_0x2d1446(0x18e);nomApes[_0x2d1446(0x188)]=sessionStorage['getItem'](_0x2d1446(0x176))+'\x20'+sessionStorage[_0x2d1446(0x17e)](_0x2d1446(0x15e)),btnLogout['addEventListener'](_0x2d1446(0x157),()=>{const _0x20cb8a=_0x2d1446;if(confirm(_0x20cb8a(0x150))){if(sessionStorage[_0x20cb8a(0x17e)](_0x20cb8a(0x159))==_0x20cb8a(0x16e))sessionStorage[_0x20cb8a(0x167)]('nieUsuario');sessionStorage[_0x20cb8a(0x167)](_0x20cb8a(0x159)),sessionStorage[_0x20cb8a(0x167)](_0x20cb8a(0x176)),sessionStorage[_0x20cb8a(0x167)](_0x20cb8a(0x15e)),sessionStorage[_0x20cb8a(0x167)](_0x20cb8a(0x174)),sessionStorage['removeItem']('nieUsuario'),location['href']='index.html';}}),getReservas('',sessionStorage[_0x2d1446(0x17e)](_0x2d1446(0x174)),'','')[_0x2d1446(0x197)](_0x47eedf=>{const _0x461957=_0x2d1446;tbodyReservas[_0x461957(0x190)]='';for(let _0x2f5937 of _0x47eedf){_0x2f5937[_0x461957(0x158)]=='No'&&(tbodyReservas[_0x461957(0x190)]+='\x0a\x20\x20\x20\x20\x20\x20<tr\x20class=\x22align-middle\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22d-none\x22>'+_0x2f5937[_0x461957(0x165)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2f5937[_0x461957(0x152)]+_0x461957(0x17b)+_0x2f5937[_0x461957(0x182)]+_0x461957(0x17b)+_0x2f5937[_0x461957(0x163)]+_0x461957(0x17b)+_0x2f5937[_0x461957(0x15b)]+_0x461957(0x14d));}for(let _0x800e48 of document[_0x461957(0x195)]('.btn-Anular')){_0x800e48[_0x461957(0x160)](_0x461957(0x157),_0x25b76f=>{const _0x496335=_0x461957;let _0x228d9a=_0x25b76f[_0x496335(0x178)][_0x496335(0x194)][_0x496335(0x194)]['firstElementChild']['textContent'];getReservas(_0x228d9a,sessionStorage[_0x496335(0x17e)](_0x496335(0x174)),'','')[_0x496335(0x197)](_0x13e30f=>{const _0x4f72e0=_0x496335;if(_0x13e30f[_0x4f72e0(0x185)]==0x1){let _0x52b039=[_0x13e30f[0x0][_0x4f72e0(0x152)],_0x13e30f[0x0][_0x4f72e0(0x153)],_0x13e30f[0x0][_0x4f72e0(0x15f)],_0x13e30f[0x0][_0x4f72e0(0x182)],_0x13e30f[0x0][_0x4f72e0(0x163)],_0x13e30f[0x0][_0x4f72e0(0x165)][_0x4f72e0(0x155)](0x0,_0x13e30f[0x0][_0x4f72e0(0x165)][_0x4f72e0(0x185)]-0x2),_0x13e30f[0x0][_0x4f72e0(0x165)][_0x4f72e0(0x16c)](-0x1),_0x13e30f[0x0][_0x4f72e0(0x166)],_0x13e30f[0x0]['A_EDICION'],_0x13e30f[0x0][_0x4f72e0(0x172)],_0x13e30f[0x0][_0x4f72e0(0x14e)]];for(let _0x4b4fd8=0x0;_0x4b4fd8<0xb;_0x4b4fd8++){camposAnular[_0x4f72e0(0x18c)][_0x4b4fd8][_0x4f72e0(0x18c)][0x1][_0x4f72e0(0x188)]=_0x52b039[_0x4b4fd8];}}else alert(_0x4f72e0(0x18d));})[_0x496335(0x19a)](_0x1f3717=>alert(_0x496335(0x17d)));});}btnAnular['addEventListener']('click',()=>{const _0x51fc15=_0x461957;let _0x4e9784=camposAnular[_0x51fc15(0x18c)][0x5][_0x51fc15(0x18c)][0x1][_0x51fc15(0x188)]+'_'+camposAnular[_0x51fc15(0x18c)][0x6]['children'][0x1][_0x51fc15(0x188)];confirm(_0x51fc15(0x17a))&&deleteReserva(_0x4e9784,'')[_0x51fc15(0x197)](_0x2020b5=>{const _0x210534=_0x51fc15;if(_0x2020b5[0x0]&&_0x2020b5[0x0]==_0x210534(0x14f))alert(_0x210534(0x15c)),location['href']=_0x210534(0x16f);else alert(_0x210534(0x156));})[_0x51fc15(0x19a)](_0x7759bd=>alert(_0x51fc15(0x184)));});})[_0x2d1446(0x19a)](_0x602428=>alert('Error\x20al\x20procesar\x20la\x20petición\x20de\x20información\x20sobre\x20reservas')),getPrestamos('',sessionStorage['getItem'](_0x2d1446(0x174)),'','','','No')['then'](_0x52d693=>{const _0x9f2a15=_0x2d1446;tbodyPrestAct[_0x9f2a15(0x190)]='';for(let _0x248914 of _0x52d693){let _0x4c0c4f=_0x248914[_0x9f2a15(0x158)]=='Si'?'\x20class=\x22text-danger\x20fw-bold\x22':'';tbodyPrestAct[_0x9f2a15(0x190)]+=_0x9f2a15(0x17f)+_0x248914[_0x9f2a15(0x165)]+_0x9f2a15(0x193)+_0x248914[_0x9f2a15(0x152)]+'</td>\x0a\x20\x20\x20\x20\x20\x20<td>'+_0x248914[_0x9f2a15(0x182)]+_0x9f2a15(0x193)+_0x248914[_0x9f2a15(0x163)]+_0x9f2a15(0x180)+_0x4c0c4f+'>'+_0x248914['FECHA_DEVOL']+_0x9f2a15(0x14b);}})['catch'](_0x3d2c9e=>alert(_0x2d1446(0x179))),getPrestamos('',sessionStorage[_0x2d1446(0x17e)]('dniUsuario'),'','','','Si')[_0x2d1446(0x197)](_0x42b363=>{const _0x3a6291=_0x2d1446;tbodyHistPrest[_0x3a6291(0x190)]='';for(let _0x189ea0 of _0x42b363){let _0x596ced=_0x189ea0[_0x3a6291(0x189)]=='No'?_0x3a6291(0x199):'';tbodyHistPrest[_0x3a6291(0x190)]+=_0x3a6291(0x154)+_0x189ea0[_0x3a6291(0x152)]+_0x3a6291(0x193)+_0x189ea0[_0x3a6291(0x165)][_0x3a6291(0x155)](0x0,_0x189ea0[_0x3a6291(0x165)][_0x3a6291(0x185)]-0x2)+_0x3a6291(0x181)+_0x189ea0[_0x3a6291(0x165)][_0x3a6291(0x16c)](-0x1)+_0x3a6291(0x193)+_0x189ea0['AUTOR']+_0x3a6291(0x193)+_0x189ea0[_0x3a6291(0x15f)]+_0x3a6291(0x193)+_0x189ea0[_0x3a6291(0x182)]+_0x3a6291(0x193)+_0x189ea0['CENTRO']+'</td>\x0a\x20\x20\x20\x20\x20\x20<td>'+_0x189ea0[_0x3a6291(0x166)]+_0x3a6291(0x193)+_0x189ea0[_0x3a6291(0x169)]+'</td>\x0a\x20\x20\x20\x20\x20\x20<td>'+_0x189ea0[_0x3a6291(0x172)]+'</td>\x0a\x20\x20\x20\x20\x20\x20<td>'+_0x189ea0['USUARIO']+_0x3a6291(0x177)+_0x596ced+_0x3a6291(0x18a);}for(btn of document[_0x3a6291(0x195)](_0x3a6291(0x16b))){btn[_0x3a6291(0x160)](_0x3a6291(0x157),_0x577bc0=>{const _0x45e769=_0x3a6291;let _0x2c260f=[0x0,0x3,0x4,0x5,0x6,0x1,0x2,0x7,0x8,0x9,0xa];for(let _0x45b490=0x0;_0x45b490<_0x2c260f[_0x45e769(0x185)];_0x45b490++){camposReserva['children'][_0x45b490][_0x45e769(0x18c)][0x1][_0x45e769(0x188)]=btn[_0x45e769(0x194)][_0x45e769(0x194)][_0x45e769(0x18c)][_0x2c260f[_0x45b490]][_0x45e769(0x188)];}getLibrosActUsuario(sessionStorage['getItem'](_0x45e769(0x174)))[_0x45e769(0x197)](_0x277fc9=>{const _0x31e14c=_0x45e769;if(_0x277fc9[_0x31e14c(0x183)]['length']+_0x277fc9['prestamos'][_0x31e14c(0x185)]<0x2){if(_0x277fc9[_0x31e14c(0x183)][_0x31e14c(0x185)]==0x1&&_0x277fc9[_0x31e14c(0x183)][0x0][_0x31e14c(0x165)]==btn[_0x31e14c(0x194)][_0x31e14c(0x194)][_0x31e14c(0x18c)][0x1][_0x31e14c(0x188)]+'_'+btn[_0x31e14c(0x194)]['parentElement'][_0x31e14c(0x18c)][0x2][_0x31e14c(0x188)]||_0x277fc9[_0x31e14c(0x18b)][_0x31e14c(0x185)]==0x1&&_0x277fc9['prestamos'][0x0]['COD_LIBRO']==btn[_0x31e14c(0x194)][_0x31e14c(0x194)]['children'][0x1][_0x31e14c(0x188)]+'_'+btn[_0x31e14c(0x194)][_0x31e14c(0x194)][_0x31e14c(0x18c)][0x2][_0x31e14c(0x188)])alert(_0x31e14c(0x15d));else btn['parentElement'][_0x31e14c(0x162)]['dispatchEvent'](new Event('click'));}else alert(_0x31e14c(0x170));})[_0x45e769(0x19a)](_0x294c20=>alert('Error\x20al\x20procesar\x20la\x20petición\x20de\x20información\x20sobre\x20libros\x20activos\x20del\x20usuario'));});}btnReservar[_0x3a6291(0x160)](_0x3a6291(0x157),()=>{const _0x4cb489=_0x3a6291;let _0x20317b=camposReserva[_0x4cb489(0x18c)][0x5][_0x4cb489(0x18c)][0x1][_0x4cb489(0x188)]+'_'+camposReserva[_0x4cb489(0x18c)][0x6][_0x4cb489(0x18c)][0x1]['textContent'];getFechaRecogida()[_0x4cb489(0x197)](_0xedf179=>{const _0x4bf129=_0x4cb489;let _0x17e16b=_0xedf179[0x0];putReserva(_0x20317b,sessionStorage['getItem'](_0x4bf129(0x174)),_0x17e16b)['then'](_0x842e69=>{const _0x227693=_0x4bf129;_0x842e69[0x0]&&(alert('Tu\x20reserva\x20se\x20ha\x20efectuado\x20con\x20éxito'),location[_0x227693(0x16d)]=_0x227693(0x16f));})[_0x4bf129(0x19a)](_0x10d842=>alert(_0x4bf129(0x18f)));})[_0x4cb489(0x19a)](_0x1d87b4=>alert(_0x4cb489(0x175)));});})[_0x2d1446(0x19a)](_0xb613b4=>alert('Error\x20al\x20procesar\x20la\x20petición\x20de\x20información\x20sobre\x20préstamos'));