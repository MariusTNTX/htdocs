const _0x226d1c=_0x153d;(function(_0xbbe4a2,_0x5a0ec7){const _0x4638e2=_0x153d,_0xcc9d84=_0xbbe4a2();while(!![]){try{const _0x3b6054=-parseInt(_0x4638e2(0x12c))/0x1+-parseInt(_0x4638e2(0xfe))/0x2*(-parseInt(_0x4638e2(0x11d))/0x3)+parseInt(_0x4638e2(0xe6))/0x4*(parseInt(_0x4638e2(0x116))/0x5)+-parseInt(_0x4638e2(0x113))/0x6+-parseInt(_0x4638e2(0x120))/0x7*(parseInt(_0x4638e2(0x115))/0x8)+parseInt(_0x4638e2(0x11f))/0x9+parseInt(_0x4638e2(0xf7))/0xa*(parseInt(_0x4638e2(0xf6))/0xb);if(_0x3b6054===_0x5a0ec7)break;else _0xcc9d84['push'](_0xcc9d84['shift']());}catch(_0x587ba8){_0xcc9d84['push'](_0xcc9d84['shift']());}}}(_0x4994,0x6fbb7));function _0x153d(_0x3963d6,_0x20b458){const _0x499487=_0x4994();return _0x153d=function(_0x153d7c,_0x45116e){_0x153d7c=_0x153d7c-0xe0;let _0x409b37=_0x499487[_0x153d7c];return _0x409b37;},_0x153d(_0x3963d6,_0x20b458);}let nomApes=document[_0x226d1c(0xf1)](_0x226d1c(0x12d)),tbodyReservas=document[_0x226d1c(0xf1)](_0x226d1c(0xfa)),tbodyPrestAct=document[_0x226d1c(0xf1)](_0x226d1c(0x117)),tbodyHistPrest=document[_0x226d1c(0xf1)](_0x226d1c(0x133)),btnLogout=document[_0x226d1c(0xf1)]('btnLogout'),btnAnular=document[_0x226d1c(0xf1)](_0x226d1c(0x125)),btnReservar=document[_0x226d1c(0xf1)]('btnReservar'),camposAnular=document[_0x226d1c(0xf1)](_0x226d1c(0x128)),camposReserva=document[_0x226d1c(0xf1)](_0x226d1c(0x11c));function _0x4994(){const _0xd2b921=['apellidosUsuario','Alumno','parentElement','camposReserva','2664VZooHj','substring','6232050bXNZyB','3521UeCxWE','>Reservar</button></td>\x0a\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20data-bs-toggle=\x22modal\x22\x20data-bs-target=\x22#modalReserva\x22>\x0a\x20\x20\x20\x20</tr>','Delete\x20Exitoso','Error\x20al\x20procesar\x20la\x20petición\x20de\x20cálculo\x20de\x20fecha','dispatchEvent','btnAnular','Error\x20al\x20procesar\x20la\x20petición\x20de\x20información\x20sobre\x20reservas','substr','camposAnular','</td>\x0a\x20\x20\x20\x20\x20\x20<td><button\x20type=\x22button\x22\x20class=\x22btn\x20btn-primary\x20btn-Reservar\x22','perfil.html','prestamos','152749BjSEya','nomApes','Error\x20al\x20procesar\x20la\x20petición\x20de\x20información\x20sobre\x20libros\x20activos\x20del\x20usuario','¿Seguro\x20que\x20deseas\x20cerrar\x20la\x20sesión?','\x0a\x20\x20\x20\x20<tr\x20class=\x22align-middle\x22>\x0a\x20\x20\x20\x20\x20\x20<td\x20class=\x22d-none\x22>','Tu\x20reserva\x20se\x20ha\x20efectuado\x20con\x20éxito','removeItem','tbodyHistPrest','addEventListener','</td>\x0a\x20\x20\x20\x20\x20\x20<td','COD_LIBRO','No\x20puedes\x20reservar:\x20Tienes\x20demasiadas\x20reservas\x20y/o\x20préstamos\x20en\x20curso','A_EDICION','Error\x20al\x20procesar\x20la\x20petición\x20de\x20borrado\x20de\x20la\x20reserva','nextElementSibling','.btn-Anular','1288972rEBuiN','La\x20reserva\x20ha\x20sido\x20eliminada\x20con\x20éxito','nieUsuario','Error\x20al\x20eliminar\x20la\x20reserva','MATERIA','innerHTML','nombreUsuario','¿Seguro\x20que\x20deseas\x20anular\x20la\x20reserva?\x20El\x20ejemplar\x20volverá\x20a\x20estar\x20disponible\x20al\x20público','dniUsuario','textContent','click','getElementById','CENTRO','querySelectorAll','No\x20puedes\x20reservar:\x20Ya\x20tienes\x20una\x20reserva\x20o\x20préstamo\x20en\x20curso\x20con\x20éste\x20ejemplar','USUARIO','11phLBmw','4628730iDrHyA','</td>\x0a\x20\x20\x20\x20\x20\x20<td>','children','tbodyReservas','\x20disabled','length','EDITORIAL','388KFVRQQ','index.html','firstElementChild','href','target','tipoUsuario','</td>\x0a\x20\x20\x20\x20</tr>','ESTADO','DISPONIBLE','reservas','DEPARTAMENTO','then','Error\x20al\x20procesar\x20la\x20petición\x20de\x20inserción\x20de\x20la\x20reserva','catch','\x20class=\x22text-danger\x20fw-bold\x22','PENDIENTE','getItem','AUTOR','TITULO','\x0a\x20\x20\x20\x20<tr\x20class=\x22align-middle\x22>\x0a\x20\x20\x20\x20\x20\x20<td>','</td>\x0a\x20\x20\x20\x20\x20\x20<td><button\x20type=\x22button\x22\x20class=\x22btn\x20btn-primary\x20btn-Anular\x22\x20data-bs-toggle=\x22modal\x22\x20data-bs-target=\x22#modalAnular\x22>Anular</button></td>\x0a\x20\x20\x20\x20</tr>','3785988iKGaVT','FECHA_DEVOL','6496lVNROP','5JDCINo','tbodyPrestAct','Error\x20al\x20procesar\x20la\x20petición\x20de\x20información\x20sobre\x20préstamos'];_0x4994=function(){return _0xd2b921;};return _0x4994();}eliminarSesionAdmin();if(!sessionStorage[_0x226d1c(0x10e)](_0x226d1c(0x103)))location['href']='login.html';nomApes['textContent']=sessionStorage[_0x226d1c(0x10e)](_0x226d1c(0xec))+'\x20'+sessionStorage[_0x226d1c(0x10e)]('apellidosUsuario'),btnLogout['addEventListener'](_0x226d1c(0xf0),()=>{const _0x134450=_0x226d1c;if(confirm(_0x134450(0x12f))){if(sessionStorage[_0x134450(0x10e)](_0x134450(0x103))==_0x134450(0x11a))sessionStorage[_0x134450(0x132)](_0x134450(0xe8));sessionStorage['removeItem'](_0x134450(0x103)),sessionStorage[_0x134450(0x132)](_0x134450(0xec)),sessionStorage[_0x134450(0x132)](_0x134450(0x119)),sessionStorage['removeItem'](_0x134450(0xee)),sessionStorage[_0x134450(0x132)](_0x134450(0xe8)),location[_0x134450(0x101)]=_0x134450(0xff);}}),getReservas('',sessionStorage[_0x226d1c(0x10e)](_0x226d1c(0xee)),'','')[_0x226d1c(0x109)](_0x249d68=>{const _0x109a9f=_0x226d1c;tbodyReservas['innerHTML']='';for(let _0x5855fe of _0x249d68){let _0x4420d1=_0x5855fe[_0x109a9f(0x10d)]=='Si'?_0x109a9f(0x10c):'';tbodyReservas[_0x109a9f(0xeb)]+='\x0a\x20\x20\x20\x20<tr\x20class=\x22align-middle\x22>\x0a\x20\x20\x20\x20\x20\x20<td\x20class=\x22d-none\x22>'+_0x5855fe['COD_LIBRO']+'</td>\x0a\x20\x20\x20\x20\x20\x20<td>'+_0x5855fe[_0x109a9f(0x110)]+'</td>\x0a\x20\x20\x20\x20\x20\x20<td>'+_0x5855fe['DEPARTAMENTO']+_0x109a9f(0xf8)+_0x5855fe[_0x109a9f(0xf2)]+_0x109a9f(0x135)+_0x4420d1+'>'+_0x5855fe['FECHA_FIN']+_0x109a9f(0x112);}for(let _0x3416cd of document['querySelectorAll'](_0x109a9f(0xe5))){_0x3416cd[_0x109a9f(0x134)](_0x109a9f(0xf0),_0x3831f0=>{const _0x22e161=_0x109a9f;let _0x4cc45e=_0x3831f0[_0x22e161(0x102)][_0x22e161(0x11b)][_0x22e161(0x11b)][_0x22e161(0x100)][_0x22e161(0xef)];getReservas(_0x4cc45e,sessionStorage['getItem'](_0x22e161(0xee)),'','')['then'](_0x4419c1=>{const _0x321348=_0x22e161;if(_0x4419c1[_0x321348(0xfc)]==0x1){let _0x31f7a5=[_0x4419c1[0x0][_0x321348(0x110)],_0x4419c1[0x0][_0x321348(0x10f)],_0x4419c1[0x0][_0x321348(0xea)],_0x4419c1[0x0]['DEPARTAMENTO'],_0x4419c1[0x0][_0x321348(0xf2)],_0x4419c1[0x0][_0x321348(0xe0)][_0x321348(0x11e)](0x0,_0x4419c1[0x0][_0x321348(0xe0)][_0x321348(0xfc)]-0x2),_0x4419c1[0x0][_0x321348(0xe0)][_0x321348(0x127)](-0x1),_0x4419c1[0x0][_0x321348(0xfd)],_0x4419c1[0x0][_0x321348(0xe2)],_0x4419c1[0x0]['ESTADO'],_0x4419c1[0x0][_0x321348(0xf5)]];for(let _0x41c8ba=0x0;_0x41c8ba<0xb;_0x41c8ba++){camposAnular[_0x321348(0xf9)][_0x41c8ba][_0x321348(0xf9)][0x1]['textContent']=_0x31f7a5[_0x41c8ba];}}else alert('Error\x20al\x20recuperar\x20los\x20datos\x20de\x20ésta\x20reserva');})[_0x22e161(0x10b)](_0x59954d=>alert('Error\x20al\x20procesar\x20la\x20petición\x20de\x20información\x20sobre\x20reservas'));});}btnAnular[_0x109a9f(0x134)](_0x109a9f(0xf0),()=>{const _0xdb57b4=_0x109a9f;let _0x6fab14=camposAnular[_0xdb57b4(0xf9)][0x5]['children'][0x1][_0xdb57b4(0xef)]+'_'+camposAnular['children'][0x6][_0xdb57b4(0xf9)][0x1]['textContent'];confirm(_0xdb57b4(0xed))&&deleteReserva(_0x6fab14,'')[_0xdb57b4(0x109)](_0x17b409=>{const _0x2cf6a8=_0xdb57b4;if(_0x17b409[0x0]&&_0x17b409[0x0]==_0x2cf6a8(0x122))alert(_0x2cf6a8(0xe7)),location[_0x2cf6a8(0x101)]=_0x2cf6a8(0x12a);else alert(_0x2cf6a8(0xe9));})[_0xdb57b4(0x10b)](_0x318841=>alert(_0xdb57b4(0xe3)));});})['catch'](_0x3a720c=>alert(_0x226d1c(0x126))),getPrestamos('',sessionStorage[_0x226d1c(0x10e)](_0x226d1c(0xee)),'','','','No')[_0x226d1c(0x109)](_0x81f104=>{const _0x4989ba=_0x226d1c;tbodyPrestAct[_0x4989ba(0xeb)]='';for(let _0x50db75 of _0x81f104){let _0x5c4cba=_0x50db75[_0x4989ba(0x10d)]=='Si'?_0x4989ba(0x10c):'';tbodyPrestAct[_0x4989ba(0xeb)]+=_0x4989ba(0x130)+_0x50db75[_0x4989ba(0xe0)]+_0x4989ba(0xf8)+_0x50db75[_0x4989ba(0x110)]+_0x4989ba(0xf8)+_0x50db75[_0x4989ba(0x108)]+_0x4989ba(0xf8)+_0x50db75[_0x4989ba(0xf2)]+'</td>\x0a\x20\x20\x20\x20\x20\x20<td'+_0x5c4cba+'>'+_0x50db75[_0x4989ba(0x114)]+_0x4989ba(0x104);}})[_0x226d1c(0x10b)](_0x30d47c=>alert(_0x226d1c(0x118))),getPrestamos('',sessionStorage[_0x226d1c(0x10e)](_0x226d1c(0xee)),'','','','Si')[_0x226d1c(0x109)](_0x446102=>{const _0x3a4e76=_0x226d1c;tbodyHistPrest[_0x3a4e76(0xeb)]='';for(let _0x41775f of _0x446102){let _0x4a8e40=_0x41775f[_0x3a4e76(0x106)]=='No'?_0x3a4e76(0xfb):'';tbodyHistPrest['innerHTML']+=_0x3a4e76(0x111)+_0x41775f[_0x3a4e76(0x110)]+_0x3a4e76(0xf8)+_0x41775f[_0x3a4e76(0xe0)][_0x3a4e76(0x11e)](0x0,_0x41775f['COD_LIBRO'][_0x3a4e76(0xfc)]-0x2)+'</td>\x0a\x20\x20\x20\x20\x20\x20<td\x20class=\x22d-none\x22>'+_0x41775f[_0x3a4e76(0xe0)][_0x3a4e76(0x127)](-0x1)+_0x3a4e76(0xf8)+_0x41775f[_0x3a4e76(0x10f)]+_0x3a4e76(0xf8)+_0x41775f[_0x3a4e76(0xea)]+_0x3a4e76(0xf8)+_0x41775f['DEPARTAMENTO']+_0x3a4e76(0xf8)+_0x41775f[_0x3a4e76(0xf2)]+_0x3a4e76(0xf8)+_0x41775f['EDITORIAL']+_0x3a4e76(0xf8)+_0x41775f[_0x3a4e76(0xe2)]+_0x3a4e76(0xf8)+_0x41775f[_0x3a4e76(0x105)]+'</td>\x0a\x20\x20\x20\x20\x20\x20<td>'+_0x41775f['USUARIO']+_0x3a4e76(0x129)+_0x4a8e40+_0x3a4e76(0x121);}for(btn of document[_0x3a4e76(0xf3)]('.btn-Reservar')){btn['addEventListener'](_0x3a4e76(0xf0),_0x50d6b4=>{const _0x45fc9a=_0x3a4e76;let _0xed88f8=[0x0,0x3,0x4,0x5,0x6,0x1,0x2,0x7,0x8,0x9,0xa];for(let _0x56e98e=0x0;_0x56e98e<_0xed88f8[_0x45fc9a(0xfc)];_0x56e98e++){camposReserva[_0x45fc9a(0xf9)][_0x56e98e][_0x45fc9a(0xf9)][0x1]['textContent']=btn['parentElement'][_0x45fc9a(0x11b)]['children'][_0xed88f8[_0x56e98e]][_0x45fc9a(0xef)];}getLibrosActUsuario(sessionStorage[_0x45fc9a(0x10e)]('dniUsuario'))['then'](_0x2b7847=>{const _0x1030d1=_0x45fc9a;if(_0x2b7847[_0x1030d1(0x107)][_0x1030d1(0xfc)]+_0x2b7847['prestamos'][_0x1030d1(0xfc)]<0x2){if(_0x2b7847[_0x1030d1(0x107)][_0x1030d1(0xfc)]==0x1&&_0x2b7847['reservas'][0x0][_0x1030d1(0xe0)]==btn[_0x1030d1(0x11b)][_0x1030d1(0x11b)][_0x1030d1(0xf9)][0x1]['textContent']+'_'+btn['parentElement'][_0x1030d1(0x11b)][_0x1030d1(0xf9)][0x2][_0x1030d1(0xef)]||_0x2b7847[_0x1030d1(0x12b)]['length']==0x1&&_0x2b7847['prestamos'][0x0][_0x1030d1(0xe0)]==btn[_0x1030d1(0x11b)][_0x1030d1(0x11b)][_0x1030d1(0xf9)][0x1]['textContent']+'_'+btn[_0x1030d1(0x11b)][_0x1030d1(0x11b)][_0x1030d1(0xf9)][0x2][_0x1030d1(0xef)])alert(_0x1030d1(0xf4));else btn['parentElement'][_0x1030d1(0xe4)][_0x1030d1(0x124)](new Event(_0x1030d1(0xf0)));}else alert(_0x1030d1(0xe1));})[_0x45fc9a(0x10b)](_0x1aa703=>alert(_0x45fc9a(0x12e)));});}btnReservar[_0x3a4e76(0x134)](_0x3a4e76(0xf0),()=>{const _0x47a8d6=_0x3a4e76;let _0x454ff6=camposReserva[_0x47a8d6(0xf9)][0x5]['children'][0x1][_0x47a8d6(0xef)]+'_'+camposReserva['children'][0x6][_0x47a8d6(0xf9)][0x1]['textContent'];getFechaRecogida()['then'](_0x106233=>{const _0x581aac=_0x47a8d6;let _0x1950b5=_0x106233[0x0];putReserva(_0x454ff6,sessionStorage[_0x581aac(0x10e)](_0x581aac(0xee)),_0x1950b5)[_0x581aac(0x109)](_0x3e4302=>{const _0x4ea077=_0x581aac;_0x3e4302[0x0]&&(alert(_0x4ea077(0x131)),location[_0x4ea077(0x101)]=_0x4ea077(0x12a));})[_0x581aac(0x10b)](_0x369813=>alert(_0x581aac(0x10a)));})[_0x47a8d6(0x10b)](_0x1ba6ab=>alert(_0x47a8d6(0x123)));});})[_0x226d1c(0x10b)](_0x3d67b5=>alert(_0x226d1c(0x118)));